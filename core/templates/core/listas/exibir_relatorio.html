{% extends "core/base.html" %}
{% load static %}
{% load widget_tweaks %}

{% block titulo %}
<title>Detalhes</title>
{% endblock titulo %}
{% block main %}

    {% include 'core/breadcrumb.html' %}

<div class="container col-8 mb-3" id="conteudo">
  <h1>Detalhes do Relatório</h1>
  <hr>

  <h2>Tema: {{ relatorio.tema }}</h2>
  <p>Descrição: {{ relatorio.descricao }}</p>
  <p>Local: {{ relatorio.local }}</p>
  <p>Data de Início: {{ relatorio.data_inicio }}</p>
  <p>Data de Encerramento: {{ relatorio.data_encerramento }}</p>
  <p>Quantidade de Participantes: {{ relatorio.quantidade_ptc }}</p>
  <!-- <p>anexo: <a href="{{ relatorio.arquivo.url }}" target="_blank">{{ relatorio.arquivo.title }}</a></p> -->
  {% if arquivos %} 
  <p>Arquivos anexados:</p>
  {% for arquivo in arquivos %}
  
      {% if arquivo.arquivo and arquivo.arquivo.url %}
          <a href="{{ arquivo.arquivo.url }}" style="text-decoration: none;" title="{{ arquivo.arquivo.name }}">
              {% if arquivo.is_doc %}
                  <i class="fa-solid fa-file-word fa-2xl"></i>
              {% elif arquivo.is_pdf %}
              <iframe class="my-4" src="{% static 'js/pdfjs/web/viewer.html' %}?file={{ arquivo.arquivo.url }}" width="100%" height="600px"></iframe>
              {% elif arquivo.is_image %}
              <img src="{{ arquivo.arquivo.url }}" alt="{{ arquivo.arquivo.name }}" style="border-radius: 10px;" width="100%" height="600px">
              {% else %}
                  <i class="fa-solid fa-file fa-2xl"></i>
              {% endif %}
          </a>
      {% endif %}
  {% endfor %}
{% else %}
  <p>Nenhum arquivo anexado</p>
{% endif %}



  <div class="py-3">
    <a onclick="goBack()" class="btn btn-secondary"><i class="fa-solid fa-arrow-left px-2"
        style="color: #ffffff;"></i>Voltar para a Lista</a>

    <a href="{% url 'gerar-pdf-relatorio' relatorio.pk %}" class="btn btn-success" target="_blank"> <i
        class="fa-regular fa-file-pdf px-2" style="color: #ffffff;"></i>Gerar PDF</a>
  </div>
</div>
</div>
<script>
  function goBack() {
    window.history.back();
  }
</script>
{% endblock %}